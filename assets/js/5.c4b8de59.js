(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{203:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("CloudLinux will package additional software needed by hosters for your convenience.")]),t._v(" "),s("p",[s("router-link",{attrs:{to:"/deprecated/#git-for-cpanel"}},[t._v("Git for cPanel")]),t._v(" (deprecated)")],1),t._v(" "),s("p",[s("router-link",{attrs:{to:"/additional_packages/#alt-suexec"}},[t._v("alt-suexec")])],1),t._v(" "),s("p",[s("span",{staticClass:"notranslate"},[s("router-link",{attrs:{to:"/additional_packages/#tuned-profiles-cloudlinux"}},[t._v("tuned-profiles-cloudlinux")])],1)]),t._v(" "),s("p",[s("router-link",{attrs:{to:"/cloudlinux-fchange/"}},[t._v("cloudlinux-fchange")])],1),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v("\nThe package also brings its own utility for installing specific suEXEC:\n"),t._m(7),t._v(" "),s("p",[t._v("There are two ways to set up new suEXEC binary:")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),s("p",[t._v("Result of both methods:\n")]),t._m(14),t._v(" "),s("p",[t._v("Here is standard suEXEC for CloudLinux 6 clean server:\n")]),t._m(15),t._v(" "),t._m(16),t._m(17),t._v(" "),s("p",[t._v("Description of other switch_suexec parameters:")]),t._v(" "),t._m(18),t._v(" "),s("p",[t._v("For most cases -p and -o options for standard Apache are useless.")]),t._v(" "),s("p",[t._v("Correct suEXEC will be restored even after httpd update or reinstall.")]),t._v(" "),s("p",[t._v("List of pre-built suEXEC binary files stored without suid bit and not executable.")]),t._v(" "),t._m(19),t._v(" "),s("p",[t._v("For installation run the command:\n")]),t._m(20),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("If you need suEXEC with custom parameters absent in current set of alt-suexec, please submit a ticket on "),s("a",{attrs:{href:"https://cloudlinux.zendesk.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cloudlinux.zendesk.com"),s("OutboundLink")],1),t._v(" and we will add new suEXEC with needed parameters.")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),s("p",[t._v("There are three profiles provided by CloudLinux:\n")]),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),s("p",[t._v("UBC parameters set the limits for the containers:")]),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),s("p",[t._v("And make it executable:\n")]),t._m(36),t._v(" "),t._m(37),t._v(" "),s("p",[t._v("To install:")]),t._v(" "),t._m(38),t._v(" "),s("p",[t._v("To start using a profile:")]),t._v(" "),t._m(39),t._v(" "),s("p",[t._v("To stop using a profile:")]),t._v(" "),t._m(40)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"additional-packages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#additional-packages","aria-hidden":"true"}},[this._v("#")]),this._v(" Additional Packages")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"alt-suexec"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#alt-suexec","aria-hidden":"true"}},[this._v("#")]),this._v(" alt-suexec")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("What is alt-suexec package needed for?")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you use standard httpd from our repository, but your users' sites do not match standard Apache location of "),e("span",{staticClass:"notranslate"},[this._v(" /var/www ")]),this._v(" , then you should use alt-suexec.\nalt-suexec package brings suEXEC binaries pre-compiled for specific locations, like "),e("span",{staticClass:"notranslate"},[this._v(" /home ")]),this._v(" .")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("How to switch suEXEC with alt-suexec")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Based on httpd 2.2 basic for 6 and httpd 2.4 basic for CloudLinux 7, the package brings to server a set of suEXECs with different "),e("span",{staticClass:"notranslate"},[this._v(" DOCUMENT ROOT ")]),this._v(" s and "),e("span",{staticClass:"notranslate"},[this._v(" MIN_UID/MIN_GID ")]),this._v(" parameters. The first set of suEXECs is listed by such modes:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# switch_suexec -h\nUSE_BIZ - DOCUMENT ROOT /biz/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_HOSTING - DOCUMENT ROOT /hosting/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_HSPHERE - DOCUMENT ROOT /hsphere/local MIN_UID 100 MIN_GID 100 CALLER httpd\nUSE_HOME - DOCUMENT ROOT /home/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_WWW - DOCUMENT ROOT /var/www/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_FSROOT - DOCUMENT ROOT / MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_STORAGE - DOCUMENT ROOT /storage/content/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_DATAS - DOCUMENT ROOT /datas/ MIN_UID 500 MIN_GID 100 CALLER apache\n")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("-l")]),t._v(" "),s("td",[t._v("list of available suexec")])]),t._v(" "),s("tr",[s("td",[t._v("-u")]),t._v(" "),s("td",[t._v("update suexec according to "),s("span",{staticClass:"notranslate"},[t._v(" /etc/sysconfig/alt-suexec ")])])]),t._v(" "),s("tr",[s("td",[t._v("-s")]),t._v(" "),s("td",[t._v("set new suexec and install it")])]),t._v(" "),s("tr",[s("td",[t._v("-p")]),t._v(" "),s("td",[t._v("set new suexec path and install it")])]),t._v(" "),s("tr",[s("td",[t._v("-o")]),t._v(" "),s("td",[t._v("set new suexec owners and install it")])]),t._v(" "),s("tr",[s("td",[t._v("-r")]),t._v(" "),s("td",[t._v("restore native apache suexec")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("via config file "),e("span",{staticClass:"notranslate"},[e("em",[this._v("/etc/sysconfig/alt-suexec")])])]),this._v(" "),e("li",[this._v("via utility "),e("em",[this._v("switch_suexec")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Here are the examples of how to set up suEXEC with "),e("span",{staticClass:"notranslate"},[this._v(' DOC_ROOT = "/home": ')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("1.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("add string "),e("span",{staticClass:"notranslate"},[this._v(' "USE_HOME" ')]),this._v(" to "),e("span",{staticClass:"notranslate"},[e("em",[this._v("/etc/sysconfig/alt-suexec")])])]),this._v(" "),e("li",[this._v("run the command "),e("span",{staticClass:"notranslate"},[this._v(" switch_suexec -u ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("2.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[e("span",{staticClass:"notranslate"},[this._v(" switch_suexec -sUSE_HOME ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# cat /etc/sysconfig/alt-suexec\nUSE_HOME\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('# /usr/sbin/suexec -V\n-D AP_DOC_ROOT="/var/www"\n-D AP_GID_MIN=100\n-D AP_HTTPD_USER="apache"\n-D AP_LOG_EXEC="/var/log/httpd/suexec.log"\n-D AP_SAFE_PATH="/usr/local/bin:/usr/bin:/bin"\n-D AP_UID_MIN=500\n-D AP_USERDIR_SUFFIX="public_html"\n-D AP_SAFE_DIRECTORY="/usr/local/safe-bin"\n')])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Here is output of new suEXEC after "),e("span",{staticClass:"notranslate"},[this._v(" USE_HOME ")]),this._v(" installtion:\n")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('# /usr/sbin/suexec -V\n-D AP_DOC_ROOT="/home/"\n-D AP_GID_MIN=100\n-D AP_HTTPD_USER="apache"\n-D AP_LOG_EXEC="/var/log/httpd/suexec.log"\n-D AP_SAFE_PATH="/usr/local/bin:/usr/bin:/bin"\n-D AP_UID_MIN=500\n-D AP_USERDIR_SUFFIX="public_html"\n-D AP_SAFE_DIRECTORY="/usr/local/safe-bin"\n')])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("-p")]),t._v(" "),s("td",[t._v("if suexec binary file will be placed not in standard way "),s("span",{staticClass:"notranslate"},[t._v(" /usr/sbin ")]),t._v(" - specify this new path with p-option")])]),t._v(" "),s("tr",[s("td",[t._v("-o")]),t._v(" "),s("td",[t._v("if suexec binary file not owned by "),s("span",{staticClass:"notranslate"},[t._v(" root:apache ")]),t._v(" - specify new owner with o-option")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("How to install alt-suexec?")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("yum install alt-suexec\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("New suexec with custom parameters")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"tuned-profiles-cloudlinux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tuned-profiles-cloudlinux","aria-hidden":"true"}},[this._v("#")]),this._v(" tuned-profiles-cloudlinux")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("span",{staticClass:"notranslate"},[e("strong",[e("em",[this._v("tuned-profiles-cloudlinux")])])]),this._v(" package brings a range of kernel under-the-hood tunings to address high LA, iowait issues what were detected earlier on particular users deploys. The package also encloses OOM adjustments to prioritize the elimination of overrun PHP, "),e("span",{staticClass:"notranslate"},[this._v(" lsphp, Phusion Passenger ")]),this._v(" workers processes over other processes (e.g. ssh, a cron job).")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("# tuned-adm list | grep cloudlinux\n- cloudlinux-default          - Default CloudLinux tuned profile\n- cloudlinux-dummy            - Empty CloudLinux tuned profile\n- cloudlinux-vz               - Empty CloudLinux tuned profile\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[this._v(" cloudlinux-dummy")]),this._v(" and  "),e("span",{staticClass:"notranslate"},[this._v(" cloudlinux-vz")]),this._v(" are used for internal needs or when  "),e("span",{staticClass:"notranslate"},[this._v(" Virtuozzo/OpenVZ ")]),this._v("  detected and actually do nothing.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[this._v(" cloudlinux-default ")]),this._v(" is one to be used, it actually does the following:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("Switches CPU power consumption mode to the maximum. CPU operates at maximum performance at the maximum clock rate:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("governor=performance\nenergy_perf_bias=performance\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[this._v("If standard software CPU governors are used.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"2"}},[e("li",[this._v("Applies the following kernel options:"),e("br"),this._v(" "),e("span",{staticClass:"notranslate"},[this._v("\nvm.force_scan_thresh=100 ")]),this._v(" - Improves kernel memory clean-up in case of big number of running LVE.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",{staticClass:"notranslate"},[this._v("  ubc.dirty_ratio=100 ")]),this._v(" - Defines maximum RAM percentage for dirty memory pages.\n"),e("span",{staticClass:"notranslate"},[this._v(" dirty_background_ratio=75")]),this._v(" - Defines RAM percentage when to allow writing dirty pages on the disk.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",{attrs:{start:"3"}},[s("li",[s("em",[t._v("[CloudLinux 7 only]")]),t._v(" Detects used disk types and changes elevator to "),s("span",{staticClass:"notranslate"},[t._v(" 'deadline' ")]),t._v(" for HDD and to "),s("span",{staticClass:"notranslate"},[t._v(" 'noop' ")]),t._v(" for SSD in "),s("span",{staticClass:"notranslate"},[t._v(" /sys/block/[blockname]/queue/scheduler ")]),t._v(" .")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("Note")]),this._v(" "),e("p",[e("span",{staticClass:"notranslate"},[this._v("The script uses /sys/block/[blockname]/queue/rotational flag, some RAID controllers can not set it properly. For example, SSD used for RAID but rotational is set to 1 by RAID driver. As a workaround add the following to /etc/rc.d/rc.local to make it applied on boot:")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('echo "noop" > /sys/block/[blockname]/queue/scheduler  \necho "0" > /sys/block/[blockname]/queue/rotational\n')])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Where "),e("span",{staticClass:"notranslate"},[e("em",[this._v("[blockname]")])]),this._v(" is used device name, like "),e("span",{staticClass:"notranslate"},[e("em",[this._v("sda/sdb")])]),this._v(" .")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("p"),this._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("chmod +x /etc/rc.d/rc.local\n")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",{attrs:{start:"4"}},[s("li",[s("p",[s("em",[t._v("[CloudLinux 7 only]")]),t._v(" The profile sets "),s("span",{staticClass:"notranslate"},[t._v(" I/O ")]),t._v(" scheduler. For the normal discs the "),s("span",{staticClass:"notranslate"},[t._v(" Deadline Scheduler ")]),t._v(" is set to improve "),s("span",{staticClass:"notranslate"},[t._v(" IO ")]),t._v(" performance and decrease "),s("span",{staticClass:"notranslate"},[t._v(" IO ")]),t._v(" latency, for SSD - noop.\nWhen configuring scheduler "),s("span",{staticClass:"notranslate"},[t._v(" I/O ")]),t._v(" queue is changed and set to the value 1024 which improves overall "),s("span",{staticClass:"notranslate"},[t._v(" I/O ")]),t._v(" subsystem performance by caching "),s("span",{staticClass:"notranslate"},[t._v(" IO ")]),t._v(" requests in memory.")])]),t._v(" "),s("li",[s("p",[t._v("Disables transparent "),s("span",{staticClass:"notranslate"},[t._v(" HugePage ")]),t._v(" .")])]),t._v(" "),s("li",[s("p",[t._v("Provides adjustment group file for OOM-Killer to kill overrun php, lsphp and "),s("span",{staticClass:"notranslate"},[t._v(" Phusion Passenger ")]),t._v(" workers first.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("yum install tuned-profiles-cloudlinux\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("tuned-adm profile cloudlinux-default\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notranslate"},[e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("tuned-adm off\n")])])])])}],!1,null,null,null);e.default=n.exports}}]);